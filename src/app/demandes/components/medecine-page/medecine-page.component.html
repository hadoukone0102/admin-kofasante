<app-toggle-header></app-toggle-header>
<app-sidebar></app-sidebar>
<main class="content">
    <app-header></app-header>
    <app-page-title
        theModule="Demande"
        theTitle="Demande de Consultation en ligne"
        theContent="Liste des Demande de Consultation en ligne">
    </app-page-title>
    <!-- Content -->
    <div class="card card-body border-0 shadow mb-4">
        <h2 class="h5 mb-4"></h2>
        <div class="table-responsive">
          <table id="exportTable" class="table table-centered table-nowrap mb-0 rounded">
            <thead class="thead-light">
                  <tr>
                    <th class="border-0 rounded-start">N°</th>
                    <th >Nom</th>
                    <th >Prenom</th>
                    <th >E-mail</th>
                    <th >Contact</th>
                    <th >Consultant</th>
                    <th >Type Consultant</th>
                    <th>Autres</th>
                    <th >Date tôt</th>
                    <th >Date tard</th>
                    <th >Status</th>
                    <th>Details</th>
                    <th class="border-0 rounded-end">Actions</th>
                  </tr>
            </thead>
            <tbody>
              <tr *ngFor="let param of  Setting.data.data;let i=index" @linePaginateAnimation>
                <td>{{ i+1 }}</td>
                <td>{{ param.nom }}</td>
                <td>{{ param.prenom }}</td>
                <td>{{ param.email }}</td>
                <td>{{ param.contact }}</td>
                <td>{{ param.consultant }}</td>
                <td>{{ param.tyeConsultation }}</td>
                <td>{{ param.autre }}</td>
                <td>{{ param.dateTot }}</td>
                <td>{{ param.dateTard }}</td>
                <td *ngIf="param.status == true" class="green">déjà envoyée</td>
                <td *ngIf="param.status != true" class="red">En attente</td>
                <td>{{ param.details }}</td>
                <td>

                  <a title="Annuler la demande" (click)="DeleteMedia(param.id)" class="me-2 btn btn-sm btn-secondary d-inline-flex align-items-center">
                    <i class="fa fa-trash" aria-hidden="true"></i>
                  </a>

                  <ng-container *ngIf="param.status != true">
                    <a title="Envoyer Facture" (click)="checkElements(param)" class="me-2 btn btn-sm btn-success d-inline-flex align-items-center"
                      data-bs-toggle="modal" data-bs-target="#pastoral">
                      <i class="fa fa-edit"></i>
                    </a>
                  </ng-container>
                </td>
              </tr>
            </tbody>
          </table>
          <div >
            <div *ngIf=" Setting.data.last_page != 0 && Setting.data.last_page != undefined && Setting.data.last_page != -1" class="card-footer px-3 border-0 d-flex flex-column flex-lg-row align-items-center justify-content-between">
              <p>
                  Affichage de {{Setting.data.current_page}}/{{Setting.data.last_page}} pages
              </p>
              <nav  aria-label="Page navigation example">
                  <ul class="pagination">
                      <li class="page-item {{isFirstPage}}">
                      <a (click)="goToPrevious()" class="page-link" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                      </a>
                      </li>
                      <li class="page-item"><a class="page-link">{{Setting.data.current_page}}</a></li>
                      <li  class="page-item {{isLastPage}}">
                      <a (click)="goToNext()" class="page-link"  aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                      </a>
                      </li>
                  </ul>
              </nav>
              </div>
          </div>

    <!-- Modal -->
      <div class="modal fade" id="pastoral" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title text-black" id="exampleModalLabel">Facture</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <h3 class="text-center">information personnel</h3>
                <form (ngSubmit)="onSubmit()" #editDonationType="ngForm">

                  <div class="m-2 d-flex align-items-center justify-content-between">
                    <label for="exampleInputEmail1" class="form-label">Nom : {{ dataElement.nom }}</label>
                    <label for="exampleInputEmail1" class="form-label">Prenom : {{ dataElement.prenom }}</label>
                  </div>

                  <div class="m-2 d-flex align-items-center justify-content-between">
                    <label for="exampleInputEmail1" class="form-label">Contact : {{ dataElement.contact }}</label>
                    <label for="exampleInputEmail1" class="form-label">E-mail : {{ dataElement.email }}</label>
                  </div>

                  <div class="m-2 d-flex align-items-center justify-content-between">
                    <label for="exampleInputEmail1" class="form-label">Consultant : {{ dataElement.consultant }}</label>
                    <label for="exampleInputEmail1" class="form-label">Type de Consultant : {{ dataElement.tyeConsultation }}</label>
                  </div>

                  <div class="m-2 d-flex align-items-center justify-content-between">
                    <label for="exampleInputEmail1" class="form-label">Date Tôt : {{ dataElement.dateTot }}</label>
                    <label for="exampleInputEmail1" class="form-label">Date Tard : {{ dataElement.dateTard }}</label>
                  </div>

                  <div class="m-2 d-flex align-items-center justify-content-between">
                    <label for="exampleInputEmail1" class="form-label">Details: {{ dataElement.details }}</label>
                  </div>

                  <div class="m-2">
                      <label for="exampleInputEmail1" class="form-label">Montants</label>
                      <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"
                        required
                        name="couts"
                        [(ngModel)]="montants.couts"
                      />
                  </div>

                  <label for="exampleInputEmail1" class="form-label">Status de la Demande</label>
                  <div class="form-check form-switch mb-4">
                    <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault"
                     style="height: 2rem;width: 5rem;"
                     name="is_actif"
                     [(ngModel)]="update.status"
                     >
                  </div>


                  <div class="modal-footer">
                    <!-- Spinner -->
                    <div *ngIf="good" class="text-center">
                      <div class=" ms-3 d-flex align-items-center justify-content-center">
                          <app-spinner></app-spinner>
                      </div>
                    </div>
                    <!-- End spinner -->

                    <button type="submit" class="btn btn-primary" >Envoyer Facture</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    <!-- Modal -->
      </div>
    <!-- End content -->

    <app-footer></app-footer>
</main>

